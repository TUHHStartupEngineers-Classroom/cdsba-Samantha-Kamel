{
  "hash": "7c79d8379040fd72762a0d253c42d258",
  "result": {
    "markdown": "---\ntitle: \"Directed Acyclic Graphs\"\n---\n\n\n> ### **`Assignment 7:`**  \n\n1. The parking spots example could be summerized by th following DAG:  \n\n\n::: {.cell hash='05_dag_cache/html/unnamed-chunk-1_3647df55ba3fdfff56e2ea094172d4f6'}\n\n```{.r .cell-code}\n# Load packages\n\nlibrary(dagitty)\n\nlibrary(ggdag)\n\n# create DAG from dagitty\ndag_model <- 'dag {\nbb=\"0,0,1,1\"\nParking [exposure,pos=\"0.1,0.5\"]\nSales [outcome,pos=\"0.5,0.5\"]\nA [pos=\"0.3,0.1\"]\nB [pos=\"0.3,0.3\"]\nC [pos=\"0.3,0.5\"]\nD [pos=\"0.3,0.7\"]\nLocation [pos=\"0.3,1\"]\nParking -> A\nParking -> B\nParking -> C\nParking -> D\nA -> Sales\nB -> Sales\nC -> Sales\nD -> Sales\nLocation -> Parking\nLocation -> Sales\n}\n'\n# draw DAG\nggdag_status(dag_model)\n```\n\n::: {.cell-output-display}\n![](05_dag_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n:::\n\n\n2. Loading SaaS company Data and linear regression:  \n\n\n::: {.cell hash='05_dag_cache/html/unnamed-chunk-2_c00e13ec99b0eee1f9d9ef16119fdf56'}\n\n```{.r .cell-code}\n#Loading Library & Data:\n\nlibrary(tidyverse)  \n\n\ncustomer_sat <- readRDS(\"D:/OneDrive/Samantha/TUHH/1stsemester/Causal Data Science for Business Analytics (SE)/Causal_Data_Science_Data/customer_sat.rds\")\n\nhead(customer_sat)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"follow_ups\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"satisfaction\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"subscription\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"8\",\"2\":\"40\",\"3\":\"Elite\"},{\"1\":\"7\",\"2\":\"45\",\"3\":\"Elite\"},{\"1\":\"8\",\"2\":\"47\",\"3\":\"Elite\"},{\"1\":\"9\",\"2\":\"44\",\"3\":\"Elite\"},{\"1\":\"10\",\"2\":\"50\",\"3\":\"Elite\"},{\"1\":\"6\",\"2\":\"55\",\"3\":\"Premium+\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\n#Linear Regression on follow_ups:\nlm_followups <- lm(satisfaction ~ follow_ups , data=customer_sat) \nsummary(lm_followups)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> \n#> Call:\n#> lm(formula = satisfaction ~ follow_ups, data = customer_sat)\n#> \n#> Residuals:\n#>     Min      1Q  Median      3Q     Max \n#> -12.412  -5.257   1.733   4.506  12.588 \n#> \n#> Coefficients:\n#>             Estimate Std. Error t value Pr(>|t|)    \n#> (Intercept)  78.8860     4.2717  18.467 1.04e-10 ***\n#> follow_ups   -3.3093     0.6618  -5.001 0.000243 ***\n#> ---\n#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#> \n#> Residual standard error: 7.923 on 13 degrees of freedom\n#> Multiple R-squared:  0.658,\tAdjusted R-squared:  0.6316 \n#> F-statistic: 25.01 on 1 and 13 DF,  p-value: 0.0002427\n```\n:::\n\n```{.r .cell-code}\n#Linear Regression on follow_ups & account for subscription:\n\nlm_followups_sub <- lm(satisfaction ~ . , data=customer_sat) \nsummary(lm_followups_sub)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> \n#> Call:\n#> lm(formula = satisfaction ~ ., data = customer_sat)\n#> \n#> Residuals:\n#>     Min      1Q  Median      3Q     Max \n#> -4.3222 -2.1972  0.3167  2.2667  3.9944 \n#> \n#> Coefficients:\n#>                      Estimate Std. Error t value Pr(>|t|)    \n#> (Intercept)           26.7667     6.6804   4.007  0.00206 ** \n#> follow_ups             2.1944     0.7795   2.815  0.01682 *  \n#> subscriptionPremium   44.7222     5.6213   7.956 6.88e-06 ***\n#> subscriptionPremium+  18.0722     2.1659   8.344 4.37e-06 ***\n#> ---\n#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#> \n#> Residual standard error: 2.958 on 11 degrees of freedom\n#> Multiple R-squared:  0.9597,\tAdjusted R-squared:  0.9487 \n#> F-statistic: 87.21 on 3 and 11 DF,  p-value: 5.956e-08\n```\n:::\n:::\n\n\n3. Comparing coefficients & Explanation:  \n  \nFor the regression on follow_ups only, the estimate value for follow_ups is negative indicating a negative relation (the higher the number of follow_ups, the lower the satisfaction). However, including the subscription type as a factor changed the results totally as now the estimate value for the follow_ups now became positive indicating a positive relation.   \nOne possible explanation could be that comparing the general relation between the follow up calls and the satisfaction is not the right indicator as it doesn't take into account that the number of follow ups, the services provided, the nature of support during the call and many other factors may differ based on the type of subscription. Therefore, the true relation was revealed when the subscription type was considered. One other explanation after examining the following plots would be that each subscription type has a different range for follow ups number and satisfaction level. This indicates that the satisfaction level has a positive relation with number of follow_ups within each subscription category.  \n\n4. Data Visualization:  \n\n\n::: {.cell hash='05_dag_cache/html/unnamed-chunk-3_9a9bd91ac8d456059aa4a5108fd5f7c1'}\n\n```{.r .cell-code}\n#Satisfaction vs Follow_ups:\nggplot(customer_sat,aes(x = satisfaction, y = follow_ups)) +  geom_point() +\n  stat_smooth(method = \"lm\", se = F)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> `geom_smooth()` using formula = 'y ~ x'\n```\n:::\n\n::: {.cell-output-display}\n![](05_dag_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n\n```{.r .cell-code}\n#Satisfaction vs Follow_ups categorized by the subscription:\nggplot(customer_sat,aes(x = satisfaction, y = follow_ups, group=subscription, color=subscription)) +  geom_point() +\n  stat_smooth(method = \"lm\", se = F)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> `geom_smooth()` using formula = 'y ~ x'\n```\n:::\n\n::: {.cell-output-display}\n![](05_dag_files/figure-html/unnamed-chunk-3-2.png){width=672}\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}